import{d,g as f,h as p,i as g,E as w,c as _,f as m,w as h,a as n,j as x,v as b,n as c,r as k,o as v}from"./app-c28b4264.js";import{h as y,W as C}from"./Wialon-36a9ea4e.js";import{L as z,_ as D}from"./PreLoader.vue_vue_type_script_setup_true_lang-1eedaf17.js";import{d as L,a as S}from"./TimezoneDate-d440e017.js";const B={class:"fixed inset-0"},T=n("i",{class:"fa-duotone fa-house"},null,-1),R={class:"absolute bottom-3 left-0 p-2 z-50"},N=d({__name:"WaterTruckPage",setup(V){const i=f(),r=L(y()),e=p({currentDate:r.date,wialon:null,geozones:null,leaflet:null,selected:null,loading:!1,smena:r.smena});function u(a){e.smena=a,o()}async function o(){e.loading=!0;const a=S(e.currentDate,e.smena),t=a.start,s=a.end;await e.wialon.waterTruckReport(t,s),e.loading=!1}return g(async()=>{e.leaflet=new z(i.value),e.wialon=new C(e.leaflet.map),e.wialon.onInit=()=>o()}),w(()=>{}),(a,t)=>{const s=k("RouterLink");return v(),_("section",B,[m(D,{loading:e.loading},null,8,["loading"]),m(s,{to:"/",class:"absolute left-3 top-3 btn-line bg-white shadow-md !text-xl z-50 text-center content-center"},{default:h(()=>[T]),_:1}),n("div",R,[x(n("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=l=>e.currentDate=l),onChange:o,class:"px-4 py-1.5 rounded-full shadow-sm"},null,544),[[b,e.currentDate]]),n("button",{class:c([{"!bg-teal-600 !text-white":e.smena==1},"bg-white px-4 ml-2 py-1.5 rounded-full"]),onClick:t[1]||(t[1]=l=>u(1))},"1 Smena",2),n("button",{class:c([{"!bg-teal-600 !text-white":e.smena==2},"bg-white px-4 ml-2 py-1.5 rounded-full"]),onClick:t[2]||(t[2]=l=>u(2))},"2 Smena",2)]),n("div",{ref_key:"geozonemap",ref:i,class:"h-full w-full z-40"},null,512)])}}});export{N as default};
