import{d,e as f,f as p,g as m,A as _,r as g,o as w,c as h,b as i,w as v,a,h as x,v as k}from"./app-7c19f7d6.js";import{h as o,W as D}from"./Wialon-fc0e1b0c.js";import{L as b,_ as z}from"./PreLoader.vue_vue_type_script_setup_true_lang-091f1edf.js";const y={class:"fixed inset-0"},L=a("i",{class:"fa-sharp fa-light fa-xmark"},null,-1),C={class:"absolute bottom-3 left-0 p-2 z-50"},R=d({__name:"WaterTruck",setup(M){const l=f(),e=p({currentDate:o().format("YYYY-MM-DD"),wialon:null,geozones:null,leaflet:null,selected:null,loading:!1}),c=setInterval(()=>{n()},1e4);async function n(){e.loading=!0;const s=o().add(-24,"hours").unix(),t=o().unix();await e.wialon.waterTruckReport(s,t),e.loading=!1}return m(async()=>{e.leaflet=new b(l.value),e.wialon=new D(e.leaflet.map),e.wialon.onInit=()=>n()}),_(()=>{clearInterval(c)}),(s,t)=>{const u=g("RouterLink");return w(),h("section",y,[i(z,{loading:e.loading},null,8,["loading"]),i(u,{to:"/",class:"absolute right-3 top-3 btn-line bg-white shadow-md !text-xl z-50 text-center content-center"},{default:v(()=>[L]),_:1}),a("div",C,[x(a("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=r=>e.currentDate=r),onChange:t[1]||(t[1]=r=>n()),class:"px-4 py-1.5 rounded-full"},null,544),[[k,e.currentDate]])]),a("div",{ref_key:"geozonemap",ref:l,class:"h-full w-full z-40"},null,512)])}}});export{R as default};
