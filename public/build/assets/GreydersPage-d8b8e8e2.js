import{M as d,aM as f,aK as p,ax as m,u as _,I as c,bx as g,v as a,bz as x,bo as h,aR as w,aE as v}from"./app-76b5f029.js";import{h as l,L as y,W as D,_ as b}from"./Leaflet-a35bc9b0.js";const k={class:"fixed inset-0"},z=a("i",{class:"fa-sharp fa-light fa-xmark"},null,-1),M={class:"absolute bottom-3 left-0 p-2 z-50"},Y=d({__name:"GreydersPage",setup(L){const s=f(),e=p({currentDate:l().format("YYYY-MM-DD"),wialon:null,geozones:null,leaflet:null,selected:null,loading:!1});async function u(n){e.loading=!0;const t=l(n).add(-10,"hours").unix(),o=l(n).unix();await e.wialon.greyderReport(t,o),e.loading=!1}async function r(){u(e.currentDate)}return m(async()=>{e.leaflet=new y(s.value),e.wialon=new D(e.leaflet.map),e.wialon.onInit=()=>r()}),(n,t)=>{const o=w("RouterLink");return v(),_("section",k,[c(b,{loading:e.loading},null,8,["loading"]),c(o,{to:"/",class:"absolute right-3 top-3 btn-line bg-white shadow-md !text-xl z-50 text-center content-center"},{default:g(()=>[z]),_:1}),a("div",M,[x(a("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=i=>e.currentDate=i),onChange:t[1]||(t[1]=i=>r()),class:"px-4 py-1.5 rounded-full"},null,544),[[h,e.currentDate]])]),a("div",{ref_key:"geozonemap",ref:s,class:"h-full w-full z-40"},null,512)])}}});export{Y as default};
